(this.webpackJsonpuserauthetication=this.webpackJsonpuserauthetication||[]).push([[0],{25:function(e,t,c){},26:function(e,t,c){},34:function(e,t,c){"use strict";c.r(t);var s=c(1),a=c.n(s),n=c(18),r=c.n(n),l=(c(25),c(26),c(11)),i=c(2),o=c(8),d=c.n(o),j=c(9),m=c(4),b=c(0),h=function(){var e=Object(i.f)().push,t=a.a.useState(""),c=Object(m.a)(t,2),s=c[0],n=c[1],r=a.a.useState(""),l=Object(m.a)(r,2),o=l[0],h=l[1],u=a.a.useState(!1),x=Object(m.a)(u,2),O=x[0],p=x[1],f=function(){var t=Object(j.a)(d.a.mark((function t(c){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.preventDefault(),s!==o){t.next=9;break}return t.next=4,fetch("https://damp-caverns-01669.herokuapp.com/forgotPassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:localStorage.getItem("email"),password:s})}).then((function(e){return e.json()}));case 4:a=t.sent,alert(a.message),"green"===a.code&&e("/login"),t.next=11;break;case 9:p(!O),setTimeout((function(){p(!O)}),1e3);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"card",children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("div",{className:"card-title",children:Object(b.jsx)("p",{className:"h4 text-center",children:"Change Password"})}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{className:"card-text",children:Object(b.jsxs)("form",{action:"",children:[Object(b.jsx)("div",{className:"row mb-3",children:Object(b.jsxs)("div",{className:"col-sm-12",children:[Object(b.jsx)("label",{htmlFor:"password",children:"New Password"}),Object(b.jsx)("input",{type:"password",id:"password",className:"form-control",value:s,required:!0,onChange:function(e){n(e.target.value)}})]})}),Object(b.jsx)("div",{className:"row mb-3",children:Object(b.jsxs)("div",{className:"col-sm-12",children:[Object(b.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),Object(b.jsx)("input",{type:"password",id:"confirmPassword",className:"form-control",value:o,required:!0,onChange:function(e){h(e.target.value)}})]})}),O?Object(b.jsx)("div",{className:"row ml-2 mr-2 mb-3 mt-5",children:Object(b.jsx)("div",{className:"col-sm-12",children:Object(b.jsx)("p",{className:"text-center text-danger",children:"Passwords didnot match"})})}):null,Object(b.jsx)("div",{className:"row mb-3 mt-5",children:Object(b.jsx)("div",{className:"col-sm-12 text-center",children:Object(b.jsx)("button",{className:"btn btn-success",type:"submit",onClick:function(e){f(e)},children:"Change password"})})})]})})]})})},u=function(){var e=a.a.useState(!1),t=Object(m.a)(e,2),c=t[0],s=t[1],n=a.a.useState(!1),r=Object(m.a)(n,2),l=r[0],o=r[1],h=a.a.useState(""),u=Object(m.a)(h,2),x=u[0],O=u[1],p=a.a.useState(""),f=Object(m.a)(p,2),v=f[0],N=f[1],g=a.a.useState(""),w=Object(m.a)(g,2),y=w[0],S=w[1],k=a.a.useState(""),C=Object(m.a)(k,2),P=C[0],T=C[1],F=Object(i.f)().push,I=function(){var e=Object(j.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!c){e.next=12;break}if(y===P){e.next=7;break}o(!0),setTimeout((function(){o(!1)}),1e3),e.next=10;break;case 7:return e.next=9,fetch("https://damp-caverns-01669.herokuapp.com/signUp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x,email:v,password:y})}).then((function(e){return e.json()})).then((function(e){"SignUp successful"===e.message&&s(!c)}));case 9:e.sent;case 10:e.next=17;break;case 12:return e.next=14,fetch("https://damp-caverns-01669.herokuapp.com/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:v,password:y})}).then((function(e){return e.json()}));case 14:a=e.sent,console.log(a),"red"!==a.code?(console.log(a),localStorage.setItem("token",a.token),localStorage.setItem("user",JSON.stringify(a.user)),alert(a.message),F("/users")):alert(a.message);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"container mt-5",children:Object(b.jsx)("div",{className:"row justify-content-center m-5 pt-3",children:Object(b.jsx)("div",{className:"col-lg-6 col-md-8 col-sm-12",children:Object(b.jsx)("div",{className:"card",children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("div",{className:"card-title",children:Object(b.jsx)("p",{className:"h4 text-center",children:c?"SignUp":"Login"})}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{className:"card-text",children:Object(b.jsxs)("form",{action:"",children:[c?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"row ml-2 mr-2 mb-3",children:Object(b.jsxs)("div",{className:"col-sm-12",children:[Object(b.jsx)("label",{htmlFor:"username",children:"Username"}),Object(b.jsx)("input",{type:"text",id:"username",className:"form-control",value:x,required:!0,onChange:function(e){O(e.target.value)}})]})})}):null,Object(b.jsx)("div",{className:"row ml-2 mr-2 mb-3",children:Object(b.jsxs)("div",{className:"col-sm-12",children:[Object(b.jsx)("label",{htmlFor:"email",children:"EmailId"}),Object(b.jsx)("input",{type:"email",id:"email",className:"form-control",value:v,required:!0,onChange:function(e){N(e.target.value)}})]})}),Object(b.jsx)("div",{className:"row ml-2 mr-2 mb-3",children:Object(b.jsxs)("div",{className:"col-sm-12",children:[Object(b.jsx)("label",{htmlFor:"password",children:"Password"}),Object(b.jsx)("input",{type:"password",id:"password",className:"form-control",value:y,required:!0,onChange:function(e){S(e.target.value)}})]})}),c?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"row ml-2 mr-2 mb-3",children:Object(b.jsxs)("div",{className:"col-sm-12",children:[Object(b.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),Object(b.jsx)("input",{type:"password",id:"confirmPassword",className:"form-control",value:P,required:!0,onChange:function(e){T(e.target.value)}})]})})}):null,l&&c?Object(b.jsx)("div",{className:"row ml-2 mr-2 mb-3 mt-5",children:Object(b.jsx)("div",{className:"col-sm-12",children:Object(b.jsx)("p",{className:"text-center text-danger",children:"Passwords didnot match"})})}):null,Object(b.jsx)("div",{className:"row ml-2 mr-2 mb-3 mt-5",children:Object(b.jsx)("div",{className:"col-sm-12",children:Object(b.jsx)("button",{className:"btn btn-outline-danger",type:"submit",onClick:function(e){I(e)},children:c?"SignUp":"Login"})})}),Object(b.jsx)("div",{className:"row justify-content-center",children:c?null:Object(b.jsx)("p",{className:"text-primary",onClick:function(){return F("/forgotpassword")},children:"Forgot Password ?"})}),Object(b.jsx)("div",{className:"row justify-content-center mt-3",children:Object(b.jsxs)("a",{href:"#",onClick:function(){return s(!c)},children:["Switch to ",c?"Login":"SignUp"]})})]})})]})})})})})},x=function(e){var t=a.a.useState(""),c=Object(m.a)(t,2),s=c[0],n=c[1],r=a.a.useState(""),l=Object(m.a)(r,2),o=l[0],h=l[1],u=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=localStorage.getItem("otp"))?o.toString()===t.toString()?x("/change"):alert("wrong otp"):alert("please enter email first");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=Object(i.f)().push,O=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==s.trim()){e.next=4;break}alert("Please Fill Email"),e.next=9;break;case 4:return e.next=6,fetch("https://damp-caverns-01669.herokuapp.com/checkEmail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})}).then((function(e){return e.json()}));case 6:"green"===(t=e.sent).code&&(localStorage.setItem("otp",t.otp),localStorage.setItem("email",t.email)),alert(t.message);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"container mt-5",children:Object(b.jsx)("div",{className:"row justify-content-center m-5 pt-3",children:Object(b.jsx)("div",{className:"col-lg-6 col-md-8 col-sm-12",children:Object(b.jsx)("div",{className:"card shd",children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("div",{className:"card-title",children:Object(b.jsx)("p",{className:"h4 text-center",children:"Password Recovery"})}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{className:"card-text",children:Object(b.jsxs)("form",{action:"",children:[Object(b.jsx)("div",{className:"row mr-2 ml-2 mb-2",children:Object(b.jsxs)("div",{className:"col-sm-12",children:[Object(b.jsx)("label",{htmlFor:"email",children:"Your Email"}),Object(b.jsx)("input",{type:"email",id:"email",className:"form-control",required:!0,value:s,onChange:function(e){n(e.target.value)}})]})}),Object(b.jsx)("div",{className:"row mr-2 ml-2 mb-2",children:Object(b.jsx)("div",{className:"col-sm-12",children:Object(b.jsx)("p",{className:"text-center",children:"An OTP will be sent to your mail"})})}),Object(b.jsx)("div",{className:"row mr-2 ml-2 mb-5",children:Object(b.jsx)("div",{className:"col-sm-12 text-center",children:Object(b.jsx)("p",{className:"text-center",children:Object(b.jsx)("button",{className:"btn btn-success",type:"button",onClick:O,children:"Send OTP"})})})}),Object(b.jsx)("div",{className:"row mr-2 ml-2 mb-5",children:Object(b.jsxs)("div",{className:"col-sm-12 text-center",children:[Object(b.jsx)("label",{htmlFor:"otp",children:"OTP"}),Object(b.jsx)("input",{type:"number",id:"otp",className:"form-control",placeholder:"Enter OTP here",required:!0,value:o,onChange:function(e){h(e.target.value)}})]})}),Object(b.jsx)("div",{className:"row mr-2 ml-2 mb-5",children:Object(b.jsx)("div",{className:"col-sm-12",children:Object(b.jsx)("button",{className:"btn btn-outline-danger",type:"button",onClick:function(e){u(e)},children:"Validate"})})}),Object(b.jsx)("div",{className:"row mr-2 ml-2 mb-5",children:Object(b.jsx)("div",{className:"col-sm-12",children:Object(b.jsx)("p",{className:"text-primary",onClick:function(){return x("/home")},children:"Back to Log-In"})})})]})})]})})})})})},O=function(){var e=Object(i.f)().push,t=a.a.useState([]),c=Object(m.a)(t,2),s=c[0],n=c[1];return a.a.useEffect((function(){fetch("https://damp-caverns-01669.herokuapp.com/users",{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:localStorage.getItem("token")})}).then((function(e){return e.json()})).then((function(t){console.log(t),"red"===t.code?(alert("Access Denied"),e("/login")):(console.log(t.users),n(s.concat(t.users)))}))}),[]),Object(b.jsxs)("div",{className:"container mt-5",children:[Object(b.jsx)("div",{className:"row justify-content-end",children:Object(b.jsx)("div",{className:"col-4",children:Object(b.jsx)("p",{className:"text-right",children:Object(b.jsx)("button",{className:"btn btn-danger",onClick:function(){localStorage.clear(),e("/login")},children:"Logout"})})})}),Object(b.jsx)("div",{className:"row mt-5",children:Object(b.jsx)("div",{className:"col-sm-12",children:Object(b.jsx)("div",{className:"card",children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("div",{className:"card-title",children:Object(b.jsx)("p",{className:"h4 text-center",children:"Users"})}),Object(b.jsx)("hr",{}),Object(b.jsx)("div",{className:"card-text",children:Object(b.jsxs)("table",{className:"table table-striped",children:[Object(b.jsx)("thead",{className:"thead-dark",children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:"text-center",children:"UserName"}),Object(b.jsx)("th",{className:"text-center",children:"Email"})]})}),Object(b.jsx)("tbody",{children:s.map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{className:"text-center",children:e.name}),Object(b.jsx)("td",{className:"text-center",children:e.email})]},t)}))})]})})]})})})})]})};var p=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(l.a,{children:Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{path:"/forgotpassword",exact:!0,component:x}),Object(b.jsx)(i.a,{path:"/change",exact:!0,component:h}),Object(b.jsx)(i.a,{path:"/login",exact:!0,component:u}),Object(b.jsx)(i.a,{path:"/users",exact:!0,component:O}),Object(b.jsx)(i.a,{path:"/",component:u})]})})})};r.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(p,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.2dcdbe67.chunk.js.map